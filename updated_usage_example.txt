---
# KPX Proxy Configuration for Fedora Linux
# Configuration file location: /etc/kpx.yaml

# Bind to localhost only (use 0.0.0.0 to listen on all interfaces)
bind: 127.0.0.1

# HTTP proxy port
port: 8080

# SOCKS proxy port (optional)
socksPort: 8081

# Logging verbosity
verbose: true
debug: false
trace: false

# Enable experimental console UI (optional)
ui: false

# Timeout settings (in seconds)
connectTimeout: 10
idleTimeout: 0
closeTimeout: 10

# Proxy definitions
proxies:
  # PAC-based proxy configuration
  pac-proxy:
    type: pac
    # Use the local PAC file
    url: file:///opt/proxy.pac
    # No credentials needed if PAC returns anonymous proxies
    # Add 'credentials: user' if PAC proxies require authentication

# Rules to determine which proxy to use for HTTP requests
rules:
  # Route all traffic through the PAC file
  - host: "*"
    proxy: pac-proxy
    # Force DNS resolution through proxy (remote DNS)
    dns: remote

# Rules for SOCKS proxy (optional, if socksPort is enabled)
socksRules:
  - host: "*"
    proxy: pac-proxy

# List of IPs/CIDRs allowed to connect (empty = allow all)
acl:
  - 127.0.0.1
  - 127.0.0.0/8

# Check for updates (optional)
check: false
update: false

# Use environment proxy variables for updates/PAC downloads
useEnvProxy: false
